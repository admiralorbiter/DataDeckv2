{% extends 'base.html' %}
{% block title %}Student Login{% endblock %}
{% block content %}
{% from '_components/forms.html' import field %}
{% from '_components/buttons.html' import primary %}

<div class="row justify-content-center">
  <div class="col-12 col-sm-10 col-md-6 col-lg-5">
    <div class="p-4 dd-card text-center">
      <h1 class="mb-3">Student Login</h1>
      <p class="text-muted">Select your district and school, then enter your 6-digit password.</p>
      <form method="post">
        {{ form.hidden_tag() }}
        <div class="row">
          <div class="col-md-6">{{ field(form.district_id, label='District') }}</div>
          <div class="col-md-6">{{ field(form.school_id, label='School') }}</div>
        </div>
        {{ field(form.pin, label='6-digit password', placeholder='000000', classes='text-center',) }}
        {{ primary('Login', type='submit', classes='w-100') }}
      </form>
    </div>
  </div>
</div>

<script>
// Update schools when district changes
document.addEventListener('DOMContentLoaded', function() {
    const districtSelect = document.getElementById('district_id');
    const schoolSelect = document.getElementById('school_id');

    // School data by district
    const schoolsByDistrict = {
        1: [  // Metro City Schools
            {id: 1, name: 'Lincoln Elementary'},
            {id: 2, name: 'Washington Middle'}
        ],
        2: [  // Riverside County
            {id: 3, name: 'Oak Valley Elementary'},
            {id: 4, name: 'Pine Ridge Middle'}
        ]
    };

    districtSelect.addEventListener('change', function() {
        const districtId = parseInt(this.value);

        // Clear current school options
        schoolSelect.innerHTML = '<option value="0">Select School</option>';

        // Add schools for selected district
        if (districtId && schoolsByDistrict[districtId]) {
            schoolsByDistrict[districtId].forEach(function(school) {
                const option = document.createElement('option');
                option.value = school.id;
                option.textContent = school.name;
                schoolSelect.appendChild(option);
            });
        }
    });
});
</script>
{% endblock %}
